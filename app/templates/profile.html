{% extends "base.html" %}
{% block content %}
<h2>My Profile</h2>
<p><strong>Email:</strong> {{ user.email }}</p>
<p><strong>Role:</strong> {% if user.is_admin %}Admin{% else %}User{% endif %}</p>
<p><strong>Registered:</strong> {{ user.created_at.strftime('%Y-%m-%d') }}</p>

<h3>Change Password</h3>
<form action="/users/change-password" method="post">
    <label>Old Password:</label>
    <input type="password" name="old_password" required><br>
    <label>New Password:</label>
    <input type="password" name="new_password" required><br>
    <button type="submit">Change Password</button>
</form>

<h3>My Bookings</h3>
<ul>
    {% for booking in bookings %}
    <li>
        Session {{ booking.session_id }} - Seat {{ booking.seat_number }}
        {% if not booking.is_cancelled %}
            <form action="/bookings/{{ booking.id }}/cancel" method="post" style="display:inline;">
                <button type="submit">Cancel</button>
            </form>
        {% else %}
            <span>(Cancelled)</span>
        {% endif %}
    </li>
    {% endfor %}
</ul>
{% endblock %}